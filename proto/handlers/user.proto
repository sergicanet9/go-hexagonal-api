syntax = "proto3";

package handlers;

option go_package = "github.com/sergicanet9/go-hexagonal-api/proto/gen/go/handlers";

import "google/api/annotations.proto";
import "google/api/http.proto";
import "google/protobuf/empty.proto";
import "protoc-gen-openapiv2/options/annotations.proto";

service UserService {
// GetAll gets all existing users.
    rpc GetAll(google.protobuf.Empty) returns (stream UserResponse) {
        option (google.api.http) = {
            get: "/v1/users"
        };
        option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
            summary: "Get all users"
            description: "Returns the list of all registered users"
            security: {
                security_requirement: {
                    key: "BearerAuth"
                    value: {}
                }
            }
        };
    }
}

// UserResponse is the response for a single user.
message UserResponse {
    string id = 1;
    string name = 2;
    string email = 3;
    repeated string roles = 4;
}